<?xml version="1.0" encoding="ISO-8859-1" ?>

<!DOCTYPE struts-config PUBLIC
          "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN"
          "http://jakarta.apache.org/struts/dtds/struts-config_1_2.dtd">

<!--
	Struts configuration for EpiScanGIS Websurveillance  
	Copyright ©2005 Markus Reinhardt - All Rights Reserved.
-->

<struts-config>
	<!-- Form Bean Definitions -->
	<form-beans>

		<form-bean
			type="de.meningococcus.episcangis.web.IncidenceFormBean"
			name="incidenceFormBean" />

		<form-bean
			type="de.meningococcus.episcangis.web.MoveMapFormBean" name="move" />

		<form-bean type="de.meningococcus.episcangis.web.LayerFormBean"
			name="layer" />

		<form-bean
			type="de.meningococcus.episcangis.web.SetParameterFormBean"
			name="parameter" />

		<form-bean
			type="de.meningococcus.episcangis.web.GetFeatureInfoFormBean"
			name="info" />

		<form-bean name="registerUser"
			type="org.apache.struts.validator.DynaValidatorForm">
			<form-property name="username" type="java.lang.String" />
			<form-property name="password" type="java.lang.String" />
			<form-property name="confirmPassword"
				type="java.lang.String" />
			<form-property name="fullName" type="java.lang.String" />
			<form-property name="phone" type="java.lang.String" />
			<form-property name="email" type="java.lang.String" />
			<form-property name="organization" type="java.lang.String" />
			<form-property name="message" type="java.lang.String" />
		</form-bean>

	</form-beans>

	<!--  Global Exception Definitions -->
	<global-exceptions>
		<exception key="error" type="java.lang.Exception"
			path="/WEB-INF/errors/xmlExceptionResult.jsp" scope="request" />
	</global-exceptions>
	
	<!-- Global Forward Definitions -->
	<global-forwards>
		<!-- index.jsp forwards to this action -->
		<forward name="welcome" path="/Welcome.do" />
		<forward name="error" path="page.error" />
	</global-forwards>

	<!-- Action Mapping Definitions -->
	<action-mappings>
		<action path="/Welcome" forward="page.welcome" />
		<action path="/RegisterUser" forward="page.registerUser" />

		<action path="/Map"
			type="de.meningococcus.episcangis.web.CreateMapAction">
		</action>

		<action path="/GetMap"
			type="de.meningococcus.episcangis.web.GetMapAction">
		</action>

		<action path="/GetMapLayer"
			type="de.meningococcus.episcangis.web.GetMapLayerAction" name="layer"
			scope="request">
		</action>

		<action path="/GetLegendGraphic"
			type="de.meningococcus.episcangis.web.GetLegendGraphicAction"
			name="layer" scope="request">
		</action>

    <action path="/PrintMap"
      type="de.meningococcus.episcangis.web.PrintMapAction">
      <forward name="success" path="/WEB-INF/results/printView.vm"/>
    </action>
    
		<action path="/ShowMap" scope="session"
			forward="/pages/ShowMap.jsp" />

		<action path="/MoveMap"
			type="de.meningococcus.episcangis.web.MoveMapAction" name="move"
			scope="request">
			<forward name="success"
				path="/WEB-INF/results/xmlDefaultSuccess.jsp" />
			<forward name="error"
				path="/WEB-INF/errors/xmlDefaultError.jsp" />
		</action>

		<action path="/SetParameter"
			type="de.meningococcus.episcangis.web.SetParameterAction"
			name="parameter" scope="request">
			<forward name="success"
				path="/WEB-INF/results/xmlSetParameterSuccess.jsp" />
			<forward name="error"
				path="/WEB-INF/errors/xmlDefaultError.jsp" />
		</action>

		<action path="/ToggleLayerState"
			type="de.meningococcus.episcangis.web.ToggleLayerStateAction"
			name="layer" scope="request">
			<forward name="success"
				path="/WEB-INF/results/xmlDefaultSuccess.jsp" />
		</action>

		<action path="/GetFeatureInfo"
			type="de.meningococcus.episcangis.web.GetFeatureInfoAction"
			name="info" scope="request">
		</action>

		<action path="/Login"
			type="de.meningococcus.episcangis.web.LoginAction">
		</action>

		<action path="/Logout"
			type="de.meningococcus.episcangis.web.LogoutAction">
		</action>

		<action path="/ManageUsers"
			type="de.meningococcus.episcangis.web.ManageUsersAction"
			name="registerUser" scope="request" validate="true"
			parameter="method" input="/RegisterUser.do">
			<forward name="registerUserSuccess"
				path="page.registerUserSuccess" />
		</action>

	</action-mappings>

	<!-- Controller Configuration -->

	<!-- 
		Configure controller to use struts-tiles
		see: http://struts.apache.org/struts-tiles/
	-->
	<controller bufferSize="4096"
		processorClass="org.apache.struts.tiles.TilesRequestProcessor" />

	<!-- 
		Message Resources Definitions
		The file MessageResources.properties contains all i18n strings
	-->
	<message-resources parameter="MessageResources" />

	<!-- Plug Ins Configuration -->

	<!-- Tiles plugin configuration -->
	<plug-in className="org.apache.struts.tiles.TilesPlugin">

		<!-- Path to XML definition file -->
		<set-property property="definitions-config"
			value="/WEB-INF/tiles-defs.xml" />
		<!-- 
			Set Module-awareness to true (default)
		-->
		<set-property property="moduleAware" value="true" />
		<!-- 
			Specify if XML parser should validate the Tiles configuration file
		-->
		<set-property value="definitions-parser-validate"
			property="true" />
	</plug-in>

	<!-- Validator plugin configuration -->
	<plug-in className="org.apache.struts.validator.ValidatorPlugIn">
		<set-property property="pathnames"
			value="/WEB-INF/validator-rules.xml,
        /WEB-INF/validation.xml" />
	</plug-in>

</struts-config>

